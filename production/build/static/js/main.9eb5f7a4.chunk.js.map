{"version":3,"sources":["Globe.jsx","LandmarkInfo.jsx","NewLandmarkTab.jsx","NewPathTab.jsx","ZoomSlider.jsx","Dashboard.jsx","SignIn.jsx","LoggedOut.jsx","SignUp.jsx","App.js","reportWebVitals.js","index.js"],"names":["Globe","size","scale","paths","landmarks","landmarkHandler","tempPath","tempLandmark","currentLandmark","editLandmark","subSolarLat","subSolarLong","useState","mouseCoordinates","setMouseCoordinates","oldCoordinates","setOldCoordinates","newCoordinates","setNewCoordinates","isMove","setIsMove","isDrag","setIsDrag","svgRef","useRef","circle","d3","projection","fitSize","type","precision","pathGenerator","useIdleTimer","timeout","onIdle","event","drawGlobe","onActive","onAction","events","debounce","getRemainingTime","getLastActiveTime","resume","rotateParams","scaleParams","isCoarse","svg","current","rotate","isDaylight","selectAll","data","join","attr","feature","on","mouseEvent","item","landmark_uid","name","description","coordinates","isVisible","drawSphere","land","landCoarse","features","landFine","raise","drawLand","lakes","lakesCoarse","lakesFine","drawLakes","nightLongitude","nightLatitude","opacity","style","center","radius","drawCurrentShadow","graticule","drawGraticule","landmark","drawCurrentLandmark","isDayTime","isAirPlane","drawArcs","drawTempPath","drawTempLandmark","drawEditLandmark","id","drawLandmarks","useEffect","width","height","ref","border","onMouseDown","screenX","screenY","onMouseMove","currentMouseCoordinates","scalingFactor","movedCoordinates","onMouseUp","LandmarkInfo","value","index","setEditLandmark","updateLandmarks","invalidateAuth","isEdit","setIsEdit","editId","setEditId","editName","setEditName","editDescription","setEditDescription","editLongitude","setEditLongitude","editLatitude","setEditLatitude","handleNameChange","target","handleDescriptionChange","handleLatitudeChange","Math","abs","parseFloat","handleLongitudeChange","handleDeleteLandmark","alert","handleEditLandmarkMode","handleCancelEdit","handleEditLandmark","body","fetch","method","headers","localStorage","getItem","JSON","stringify","then","res","json","catch","err","hidden","Typography","variant","descriptionArray","split","FormControl","fullWidth","InputLabel","htmlFor","Input","placeholder","onChange","TextField","label","multiline","rows","Button","color","onClick","endIcon","paragraph","map","element","getLandmarkInfo","setLandmarks","setTempLandmark","landmarkName","setLandmarkName","landmarkLatitude","setLandmarkLatitude","landmarkLongitude","setLandmarkLongitude","landmarkDescription","setLandmarkDescription","newTempLandmark","latitude","longitude","prevArray","path_uid","NewPathTab","setPaths","setTempPath","nodes","setNodes","isAirplane","setIsAirplane","handleNewPath","isNodesPopulated","i","length","console","log","newPath","handleDeleteNode","idArray","parentElement","parseInt","newNodes","splice","updateTempPath","newElements","newIsAirplane","newTempPath","undefined","node","lat","long","push","onElementLatitudeChange","onElementLongitudeChange","FormControlLabel","control","Switch","checked","checkedIcon","icon","latId","longitudeId","deleteBtnId","getFinishButton","ZoomSlider","handleChangeScale","gutterBottom","Slider","orientation","aria-labelledby","step","min","max","marks","Dashboard","React","isAuth","setIsAuth","setScale","setCurrentLandmark","newValue","getMinDimension","window","innerHeight","innerWidth","tabValue","setTabValue","handleTabChange","removeItem","setSubSolarLat","setSubSolarLong","getSubsolarPoint","items","itemToUpdate","error","interval","setInterval","clearInterval","className","AppBar","position","Toolbar","Grid","container","spacing","xs","padding","align","Tabs","aria-label","Tab","minWidth","NewLandmarkTab","to","pathname","SignIn","isTokenValid","setIsTokenValid","username","setUsername","password","setPassword","handleUsernameChange","handlePasswordChange","handleSignIn","setItem","token","component","margin","required","autoComplete","autoFocus","LoggedOut","SignUp","email","setEmail","isUsernameTaken","setIsUsernameTaken","getUsernameStatus","isexist","count","strengths","RegExp","test","hasNumber","hasSpecial","hasMixed","strengthIndicator","theme","createMuiTheme","palette","App","document","title","ThemeProvider","CssBaseline","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9eb5f7a4.chunk.js","sourcesContent":["//Imports from libraries\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport * as d3 from 'd3';\r\nimport * as topojson from \"topojson\";\r\nimport { useIdleTimer } from 'react-idle-timer';\r\n\r\n//Imports from self defined structures\r\n//https://github.com/martynafford/natural-earth-geojson\r\nimport landFine from \"./jsonData/ne_10m_land.json\";\r\nimport landCoarse from \"./jsonData/ne_110m_land.json\";\r\nimport lakesFine from \"./jsonData/ne_10m_lakes.json\";\r\nimport lakesCoarse from \"./jsonData/ne_110m_lakes.json\";\r\n//https://s3-us-west-2.amazonaws.com/s.cdpn.io/215059/cities-200000.json\r\n//https://public.opendatasoft.com/api/records/1.0/search/?dataset=geonames-all-cities-with-a-population-1000&q=&rows=10000&sort=population&pretty_print=true&format=json&fields=population,coordinates,name\r\nimport lightsFine from \"./jsonData/geonames-all-cities-with-a-population-1000.json\";\r\nimport lightsCoarse from \"./jsonData/cities-200000.json\";//TODO: use if performance is fixed\r\n\r\nfunction Globe({size, scale, paths, landmarks, landmarkHandler, tempPath, tempLandmark, currentLandmark, editLandmark, subSolarLat, subSolarLong}) {\r\n    //States\r\n    const [mouseCoordinates, setMouseCoordinates] = useState(null);         //state for initially pressing down the mouse button's position\r\n    const [oldCoordinates, setOldCoordinates] = useState([180, -25]);   //state for the position of the globe during inactivity (units in -longitude, -latitude)\r\n    const [newCoordinates, setNewCoordinates] = useState(null);             //state for updating the old coordinates\r\n    const [isMove, setIsMove] = useState(false);\r\n    const [isDrag, setIsDrag] = useState(false);\r\n\r\n    //Constants\r\n    const svgRef = useRef();\r\n    const circle = d3.geoCircle();\r\n    const projection = d3.geoOrthographic()\r\n        .fitSize([size, size], {type: \"Sphere\"})\r\n        .precision(0.1);\r\n    const pathGenerator = d3.geoPath().projection(projection);\r\n\r\n    /**\r\n    * Handles the mouse down event in the Globe.\r\n    * @param {*} event - the mouse event\r\n    */\r\n    const onMouseDownHandler = (event) => {\r\n        setMouseCoordinates([event.screenX, event.screenY]);\r\n    };\r\n\r\n    /**\r\n     * Gets the Radius of the city.\r\n     * @param {int} population - the population of the city\r\n     */\r\n    const getCityRadius = (population) => {\r\n        if (population < 5000)\r\n            return 0.02\r\n        else if (population < 10000)\r\n            return 0.05\r\n        else if (population < 50000)\r\n            return 0.07\r\n        else if (population < 100000)\r\n            return 0.1\r\n        else\r\n            return 0.2\r\n    };\r\n\r\n    /**\r\n     * Handles when the user has become idle.\r\n     * @param {*} event - the event during idle.\r\n     */\r\n    const handleOnIdle = event => {\r\n        // if(event !== null && event.type !== \"mousedown\"){\r\n            // console.log(\"event for idle\", event);\r\n            // console.log(\"redrawing globe\");\r\n            // console.log(\"isMove=\", isMove);\r\n            // console.log(\"ismove\", isMove);\r\n            // console.log(\"!isDrag\", !isDrag);\r\n        if(isMove && !isDrag){\r\n            // console.log(\"redrawing globe\");\r\n            drawGlobe(oldCoordinates, scale, false);\r\n            setIsMove(false);\r\n        }\r\n        // }\r\n        // console.log(event);\r\n    }\r\n    \r\n    /**\r\n     * Handles when the user has become active.\r\n     * @param {*} event - the event during active\r\n     */\r\n    const handleOnActive = event => {\r\n        // console.log(event.path[1].tagName === \"svg\");\r\n        // if(event.path[1].tagName === \"svg\"){\r\n        //     if(newCoordinates){\r\n        //         setMouseCoordinates(null);\r\n        //         setOldCoordinates(newCoordinates);\r\n        //         setNewCoordinates(null);\r\n        //     }\r\n        //     setMouseCoordinates(null);\r\n        // }\r\n    }\r\n    \r\n    /**\r\n     * Handles when the user has done an action.\r\n     * @param {*} event - the event during an action\r\n     */\r\n    const handleOnAction = (event) => {}\r\n     \r\n    //Idle timer and parameters\r\n    const { getRemainingTime, getLastActiveTime, resume } = useIdleTimer({\r\n        timeout: 1000 * 1.5,\r\n        onIdle: handleOnIdle,\r\n        onActive: handleOnActive,\r\n        onAction: handleOnAction,\r\n        events: ['mouseup'],\r\n        debounce: 500\r\n    })\r\n\r\n    /**\r\n     * Handler for when the mouse has been moved.\r\n     * @param {*} event - the event of when the mouse has been moved\r\n     */\r\n    const onMouseMoveHandler = (event) => {\r\n        if(mouseCoordinates){\r\n            // console.log(\"mouse move\", e);\r\n            // console.log(\"drawing the globe coarse\");\r\n            var currentMouseCoordinates = [event.screenX, event.screenY];\r\n            var scalingFactor = 3.0 * scale/200.0;\r\n            var movedCoordinates = [oldCoordinates[0] + (currentMouseCoordinates[0] - mouseCoordinates[0])/scalingFactor, oldCoordinates[1] - (currentMouseCoordinates[1] - mouseCoordinates[1])/scalingFactor];\r\n            movedCoordinates[1] = movedCoordinates[1] < -90 ? -90 :\r\n                movedCoordinates[1] > 90 ?  90 : movedCoordinates[1];\r\n            // projection.rotate(movedCoordinates);\r\n            setNewCoordinates(movedCoordinates);\r\n            setIsMove(true);\r\n            setIsDrag(true);\r\n            drawGlobe(movedCoordinates, scale, true);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handler when the mouse click is now up.\r\n     * @param {*} event - the event of when the mouse click is now up\r\n     */\r\n    const onMouseUpHandler = (event) => {\r\n        // console.log(\"mouseuphandler activated\");\r\n        if(newCoordinates){\r\n            // setMouseCoordinates(null);\r\n            setOldCoordinates(newCoordinates);\r\n            setNewCoordinates(null);\r\n        }\r\n        setIsDrag(false);\r\n        setMouseCoordinates(null);\r\n    };\r\n\r\n    /**\r\n     * Draws a sphere.\r\n     * @param {*} svg - the svg used to draw the sphere.\r\n     * @param {boolean} isDaylight - the parameter for night time styles\r\n     */\r\n    const drawSphere = (svg, isDaylight) => {\r\n        svg\r\n            .selectAll(\".sphere\")\r\n            .data([{type: \"Sphere\"}])\r\n            .join(\"path\")\r\n            .attr(\"class\", \"sphere\")\r\n            .attr(\"fill\", isDaylight ? \"#dde\" : \"#1c458c\")\r\n            .attr(\"d\", feature => pathGenerator(feature))\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            } );\r\n    };\r\n\r\n    /**\r\n     * Draws the grid in the ocean.\r\n     * @param {*} svg - the svg used to draw the sphere.\r\n     * @param {boolean} isDaylight - the parameter for night time styles.\r\n     */\r\n    const drawGraticule = (svg, isDaylight) => {\r\n        const graticule = d3.geoGraticule10()\r\n        svg\r\n            .selectAll(\".mesh\")\r\n            .data([graticule])\r\n            .join(\"path\")\r\n            .attr(\"class\", \"mesh\")\r\n            .attr(\"fill-opacity\",\"0\")\r\n            .attr(\"stroke\", isDaylight ? \"#ccf\" : \"gray\")\r\n            .attr(\"stroke-opacity\", \"0.5\")\r\n            .attr(\"stroke-width\", isDaylight ? 1 : 0.3)\r\n            .attr(\"d\", feature => pathGenerator(feature)).raise()\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            } );\r\n    };\r\n\r\n    /**\r\n     * Draws the land.\r\n     * @param {*} svg - the svg used to draw the sphere\r\n     * @param {boolean} isCoarse - the parameter for fine detail or coarse detail\r\n     * @param {boolean} isDaylight - the parameter for night time styles\r\n     */\r\n    const drawLand = (svg, isCoarse, isDaylight) => {\r\n        //Using local json data that is of type Topology\r\n        // console.log(landCoarse.objects.land);\r\n        // console.log(landFine);\r\n        const land = isCoarse ? landCoarse.features : landFine.features;\r\n        // console.log(land);\r\n        svg\r\n        .selectAll(\".country\")\r\n        .data(land)\r\n        .join(\"path\")\r\n        .attr(\"class\", \"country\")\r\n        .attr(\"fill\", isDaylight ? \"#edd\" : \"#f5c684\")\r\n        .attr(\"stroke\", isDaylight ? \"#faa\" : \"#b89463\")\r\n        .attr(\"stroke-width\", 0.5)\r\n        .attr(\"d\", feature => pathGenerator(feature))\r\n        .on(\"click\", (mouseEvent, item) => {\r\n            landmarkHandler([{\r\n                landmark_uid: -1,\r\n                name: \"\",\r\n                description: \"\",\r\n                coordinates: [0, 0],\r\n                isVisible: false\r\n            }]);\r\n        } )\r\n        .raise();\r\n\r\n        //Using external json data that is of type Topology\r\n        // d3.json(\"https://cdn.jsdelivr.net/npm/world-atlas@2.0.2/land-10m.json\").then(res => {\r\n        //     const countries1 = topojson.feature(isCoarse ? landCoarse : res, isCoarse ? landCoarse.objects.land : res.objects.land).features;\r\n        //     console.log(countries1);\r\n        //     svg\r\n        //     .selectAll(\".country\")\r\n        //     .data(countries1)\r\n        //     .join(\"path\")\r\n        //     .attr(\"id\", feature => console.log(feature))\r\n        //     .attr(\"class\", \"country\")\r\n        //     .attr(\"fill\", feature => \"#edd\")//daytime\r\n        //     // .attr(\"fill\", feature => \"#114\")//nighttime\r\n        //     .attr(\"stroke\", feature => \"#faa\")//daytime\r\n        //     // .attr(\"stroke\", feature => \"#004\")//nighttime\r\n        //     .attr(\"d\", feature => pathGenerator(feature));\r\n        // });\r\n\r\n        //Using local json data that is of type FeatureCollection\r\n        // svg\r\n        //     .selectAll(\".country\")\r\n        //     .data(dataCoarse.features)\r\n        //     .join(\"path\")\r\n        //     .attr(\"class\", \"country\")\r\n        //     // .attr(\"fill\", feature => \"#edd\")//daytime\r\n        //     .attr(\"fill\", feature => \"#114\")//nighttime\r\n        //     // .attr(\"stroke\", feature => \"#faa\")//daytime\r\n        //     .attr(\"stroke\", feature => \"#004\")//nighttime\r\n        //     .attr(\"d\", feature => pathGenerator(feature));\r\n    };\r\n\r\n    const drawLakes = (svg, isCoarse, isDaylight) => {\r\n        const lakes = isCoarse ? lakesCoarse.features :lakesFine.features;\r\n        svg\r\n        .selectAll(\".lakes\")\r\n        .data(lakes)\r\n        .join(\"path\")\r\n        .attr(\"class\", \"lakes\")\r\n        .attr(\"fill\", isDaylight ? \"#edd\" : \"#1c458c\")\r\n        .attr(\"stroke\", isDaylight ? \"#faa\" : \"#b89463\")\r\n        .attr(\"stroke-width\", 0.5)\r\n        .attr(\"d\", feature => pathGenerator(feature))\r\n        .raise()\r\n        .on(\"click\", (mouseEvent, item) => {\r\n            landmarkHandler([{\r\n                landmark_uid: -1,\r\n                name: \"\",\r\n                description: \"\",\r\n                coordinates: [0, 0],\r\n                isVisible: false\r\n            }]);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Draws city lights based on population sizes in cities.\r\n     * @param {*} svg - the svg used to draw city lights\r\n     */\r\n    const drawLights = (svg, isCoarse) => {\r\n        if(isCoarse){\r\n            svg\r\n            .selectAll(\".lights\")\r\n            .data(lightsCoarse)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"lights\")\r\n            .style(\"fill\", \"#ff8\")\r\n            .attr(\"fill-opacity\",\"0.4\")\r\n            .attr(\"d\", cityElement => pathGenerator(circle.center([parseFloat(cityElement[3]), parseFloat(cityElement[2])]).radius(getCityRadius(cityElement[0]))()));\r\n        }else{\r\n            svg\r\n            .selectAll(\".lights\")\r\n            .data(lightsFine)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"lights\")\r\n            .style(\"fill\", \"#ff8\")\r\n            .attr(\"fill-opacity\",\"0.4\")\r\n            .attr(\"d\", cityElement => pathGenerator(circle.center(cityElement.geometry.coordinates).radius(getCityRadius(cityElement.fields.population))()));\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Draws the landmarks.\r\n     * @param {*} svg - the svg used to draw the landmarks\r\n     * @param {boolean} isDaylight - the parameter used for night time styles\r\n     */\r\n    const drawLandmarks = (svg, isDaylight) => {\r\n        // Format of one element of data\r\n        //   {\r\n        //     id: \"landmark_1\",\r\n        //     landmark_uid: 1,\r\n        //     name: \"Manila / Marikina\",\r\n        //     description: \"First Hometown. Revisited 2011, 2013, 2017, 2018, and 2019.\",\r\n        //     coordinates: [120.9842, 14.5995]\r\n        //   }\r\n        // console.log(\"drawing landmarks\");\r\n        svg\r\n            .selectAll(\".landmarks\")\r\n            .data(landmarks)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"landmarks\")\r\n            .attr(\"id\", landmark => `${landmark.id}`)\r\n            .style(\"fill\", \"black\")\r\n            .attr(\"fill-opacity\",\"0.3\")\r\n            .on(\"mouseover\", (mouseEvent, item) => {\r\n                d3.select(`#${item.id}`).style(\"fill\", \"red\")\r\n                .attr(\"d\", landmark => pathGenerator(circle.center([landmark.coordinates[0], landmark.coordinates[1]]).radius(0.3)()));\r\n            } )\r\n            .on(\"mouseout\", (mouseEvent, item) => {\r\n                d3.select(`#${item.id}`)\r\n                .style(\"fill\", isDaylight ? \"black\" : \"black\")\r\n                .attr(\"d\", landmark => pathGenerator(circle.center([landmark.coordinates[0], landmark.coordinates[1]]).radius(0.1)()));\r\n            } )\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: item.landmark_uid,\r\n                    name: item.name,\r\n                    description: item.description,\r\n                    coordinates: item.coordinates,\r\n                    isVisible: true\r\n                }]);\r\n            })\r\n            .attr(\"d\", landmark => pathGenerator(circle.center([landmark.coordinates[0], landmark.coordinates[1]]).radius(0.1)())).raise();\r\n    };\r\n\r\n    const drawCurrentLandmark = (svg, isDaylight) => {\r\n        // console.log(\"this is the current landmark\", currentLandmark);\r\n        // var data = currentLandmark ? [currentLandmark] : [];\r\n        svg\r\n            .selectAll(\".currentLandmark\")\r\n            .data(currentLandmark)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"currentLandmark\")\r\n            .attr(\"id\", landmark => `current_${landmark.landmark_uid}`)\r\n            .style(\"fill\", \"red\")\r\n            .attr(\"fill-opacity\",\"0.3\")\r\n            .attr(\"visibility\", landmark => landmark.isVisible ? \"visible\" : \"hidden\")\r\n            .attr(\"d\", landmark => pathGenerator(circle.center([landmark.coordinates[0], landmark.coordinates[1]]).radius(0.2)())).raise();\r\n    }\r\n\r\n    const drawCurrentShadow = (svg, isDaylight) => {\r\n        var nightLongitude = subSolarLong + 180;\r\n        var nightLatitude = -subSolarLat;\r\n        // console.log(subSolarLat, subSolarLong);\r\n        var opacity = \"0.06\";\r\n        svg\r\n            .selectAll(\".shadow\")\r\n            .data([1])\r\n            .join(\"path\")\r\n            .attr(\"class\", \"shadow\")\r\n            .attr(\"id\", `shadow`)\r\n            .style(\"fill\", \"black\")\r\n            .attr(\"fill-opacity\",opacity)\r\n            .attr(\"d\", pathGenerator(circle.center([nightLongitude, nightLatitude]).radius(90)())).raise()\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            });\r\n\r\n            svg\r\n            .selectAll(\".shadow1\")\r\n            .data([1])\r\n            .join(\"path\")\r\n            .attr(\"class\", \"shadow1\")\r\n            .attr(\"id\", `shadow`)\r\n            .style(\"fill\", \"black\")\r\n            .attr(\"fill-opacity\",opacity)\r\n            .attr(\"d\", pathGenerator(circle.center([nightLongitude, nightLatitude]).radius(90-6)())).raise()\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            });\r\n\r\n            svg\r\n            .selectAll(\".shadow2\")\r\n            .data([1])\r\n            .join(\"path\")\r\n            .attr(\"class\", \"shadow2\")\r\n            .attr(\"id\", `shadow`)\r\n            .style(\"fill\", \"black\")\r\n            .attr(\"fill-opacity\",opacity)\r\n            .attr(\"d\", pathGenerator(circle.center([nightLongitude, nightLatitude]).radius(90-12)())).raise()\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            });\r\n\r\n            svg\r\n            .selectAll(\".shadow3\")\r\n            .data([1])\r\n            .join(\"path\")\r\n            .attr(\"class\", \"shadow3\")\r\n            .attr(\"id\", `shadow`)\r\n            .style(\"fill\", \"black\")\r\n            .attr(\"fill-opacity\",opacity)\r\n            .attr(\"d\", pathGenerator(circle.center([nightLongitude, nightLatitude]).radius(90-18)())).raise()\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            });\r\n    }\r\n\r\n    const drawTempLandmark = (svg, isDaylight) => {\r\n        //format of one element of data\r\n        // {\r\n        //     coordinates: [0, 0],\r\n        //     isVisible: false\r\n        //   }\r\n        svg\r\n            .selectAll(\".tempLandmark\")\r\n            .data(tempLandmark)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"tempLandmark\")\r\n            .attr(\"id\", `tempLandmark`)\r\n            .style(\"fill\", \"red\")\r\n            .attr(\"fill-opacity\",\"0.5\")\r\n            .attr(\"visibility\", landmark => landmark.isVisible ? \"visible\" : \"hidden\")\r\n            .attr(\"d\", landmark => pathGenerator(circle.center([landmark.coordinates[0], landmark.coordinates[1]]).radius(0.1)())).raise();\r\n    };\r\n\r\n    const drawEditLandmark = (svg, isDaylight) => {\r\n        //format of one element of data\r\n        // {\r\n        //     coordinates: [0, 0],\r\n        //     isVisible: false\r\n        //   }\r\n        // console.log(editLandmark);\r\n        svg\r\n            .selectAll(\".editLandmark\")\r\n            .data(editLandmark)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"editLandmark\")\r\n            .attr(\"id\", landmark => `edit`)\r\n            .style(\"fill\", \"orange\")\r\n            .attr(\"fill-opacity\",\"0.5\")\r\n            .attr(\"stroke-width\", 1)\r\n            .attr(\"stroke\",\"black\")\r\n            .attr(\"visibility\", landmark => landmark.isVisible ? \"visible\" : \"hidden\")\r\n            .attr(\"d\", landmark => pathGenerator(circle.center([landmark.coordinates[0], landmark.coordinates[1]]).radius(0.1)())).raise();\r\n    };\r\n\r\n    /**\r\n     * Draws the arcs.\r\n     * @param {*} svg - the svg used to draw the arcs\r\n     * @param {boolean} isDayTime - the parameter used for night time styles\r\n     */\r\n    const drawArcs = (svg, isDayTime) => {\r\n        //The format of one element of data is \r\n        //{ type: \"LineString\", coordinates: [[-122.810850, 49.191663], [-156.0407, 19.7367]], id:\"path_9\", path_uid: 9, isAirPlane: true}\r\n        svg\r\n            .selectAll(\".arc\")\r\n            .data(paths)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"arc\")\r\n            // .transition()\r\n            .attr(\"fill-opacity\", \"0\")\r\n            .attr(\"stroke-opacity\", feature => feature.isAirPlane ? 0.3 : 1)\r\n            .attr(\"stroke\", feature => isDayTime ? \"black\" : \"black\")\r\n            .attr(\"stroke-width\", feature => feature.isAirPlane ? 2 : 0.5)\r\n            .attr(\"d\", feature =>pathGenerator(feature)).raise()\r\n            .on(\"click\", (mouseEvent, item) => {\r\n                landmarkHandler([{\r\n                    landmark_uid: -1,\r\n                    name: \"\",\r\n                    description: \"\",\r\n                    coordinates: [0, 0],\r\n                    isVisible: false\r\n                }]);\r\n            } )\r\n            .raise();\r\n    };\r\n\r\n    const drawTempPath = (svg, isDayTime) => {\r\n        //format of one element of data\r\n        // {\r\n        //     type: \"LineString\", \r\n        //     coordinates: [],\r\n        //     isAirPlane: true\r\n        //   }\r\n        svg\r\n            .selectAll(\".tempPath\")\r\n            .data(tempPath)\r\n            .join(\"path\")\r\n            .attr(\"class\", \"tempPath\")\r\n            // .transition()\r\n            .attr(\"fill-opacity\",\"0\")\r\n            .attr(\"stroke\", feature => feature.isAirPlane ? \"red\" : \"#0dff00\")\r\n            .attr(\"stroke-opacity\", feature => 1)\r\n            .attr(\"stroke-width\", feature => 0.5)\r\n            .attr(\"d\", feature =>pathGenerator(feature))\r\n            .raise();\r\n    };\r\n    \r\n    /**\r\n     * Draws the globe.\r\n     * @param {Array<number>} rotateParams - the rotation parameters to position the globe\r\n     * @param {number} scaleParams - the scale parameter to scale the globe\r\n     * @param {boolean} isCoarse - the parameter for fine detail or coarse detail\r\n     */\r\n    const drawGlobe = (rotateParams, scaleParams, isCoarse) => {\r\n        const svg = d3.select(svgRef.current);\r\n        projection.rotate(rotateParams).scale(scaleParams);\r\n\r\n        var isDaylight = false;\r\n        \r\n        drawSphere(svg, isDaylight);\r\n\r\n        drawLand(svg, isCoarse, isDaylight);\r\n\r\n        drawLakes(svg, isCoarse, isDaylight);\r\n\r\n        if(!isDaylight){\r\n            // drawLights(svg, false);\r\n        }\r\n\r\n        drawCurrentShadow(svg, isDaylight);\r\n            \r\n        drawGraticule(svg, isDaylight);\r\n\r\n        drawCurrentLandmark(svg, isDaylight);\r\n\r\n        drawArcs(svg, isDaylight);\r\n\r\n        drawTempPath(svg, isDaylight);\r\n        \r\n        drawTempLandmark(svg, isDaylight);\r\n        \r\n        drawEditLandmark(svg, isDaylight);\r\n\r\n        drawLandmarks(svg, isDaylight);\r\n\r\n    };\r\n\r\n    //Use effect hook.\r\n    useEffect(() => {\r\n        drawGlobe(oldCoordinates, scale, true);\r\n        setIsMove(true);\r\n    }, [scale])\r\n\r\n    \r\n    useEffect(() => {\r\n        drawGlobe(oldCoordinates, scale, false);\r\n    }, [landmarks, paths, tempPath, tempLandmark, currentLandmark, editLandmark, subSolarLong, subSolarLat])\r\n    \r\n    return (\r\n        <svg width={size} height={size} ref={svgRef} style={{border:1 }}\r\n            onMouseDown={onMouseDownHandler} \r\n            onMouseMove={onMouseMoveHandler} \r\n            onMouseUp={onMouseUpHandler}>\r\n        </svg>\r\n    );\r\n}\r\n \r\nexport default Globe;","//Imports from libraries\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { FormControl, Input, InputLabel, TextField } from \"@material-ui/core\";\r\n\r\nfunction LandmarkInfo({ currentLandmark, value, index, setEditLandmark, updateLandmarks, invalidateAuth }) {\r\n\r\n    const [isEdit, setIsEdit] = useState(false);\r\n    const [editId, setEditId] = useState(-1);\r\n    const [editName, setEditName] = useState(\"\");\r\n    const [editDescription, setEditDescription] = useState(\"\");\r\n    const [editLongitude, setEditLongitude] = useState(\"\");\r\n    const [editLatitude, setEditLatitude] = useState(\"\");\r\n\r\n    const handleNameChange = (event) => {\r\n        setEditName(event.target.value);\r\n    }\r\n\r\n    const handleDescriptionChange = (event) => {\r\n        setEditDescription(event.target.value);\r\n    }\r\n\r\n    const handleLatitudeChange = (event) => {\r\n        if(event.target.value === \"\"){\r\n            var editLandmark = [{\r\n                coordinates: [0, 0],\r\n                isVisible: false\r\n            }];\r\n            setEditLandmark(editLandmark);\r\n        }\r\n\r\n        if(Math.abs(event.target.value) <= 90){\r\n            // console.log(\"value within 90\")\r\n            setEditLatitude(event.target.value);\r\n            var editLandmark = [{\r\n                coordinates: [editLongitude, parseFloat(event.target.value)],\r\n                isVisible: true\r\n            }];\r\n            if(editLongitude !== \"\" && event.target.value !== \"\"){\r\n                // console.log(\"modify edit landmark\");\r\n                setEditLandmark(editLandmark);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleLongitudeChange = (event) => {\r\n        if(event.target.value === \"\"){\r\n            var editLandmark = [{\r\n                coordinates: [0, 0],\r\n                isVisible: false\r\n            }];\r\n            setEditLandmark(editLandmark);\r\n        }\r\n\r\n        if(Math.abs(event.target.value) <= 180){\r\n            setEditLongitude(event.target.value);\r\n            var editLandmark = [{\r\n                coordinates: [parseFloat(event.target.value), editLatitude],\r\n                isVisible: true\r\n            }];\r\n            if(editLatitude !== \"\" && event.target.value !== \"\"){\r\n                setEditLandmark(editLandmark);\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleDeleteLandmark = () => {\r\n        // console.log(currentLandmark[0].id);\r\n        alert(`not yet implemented: \\nid:${currentLandmark[0].landmark_uid}`);\r\n    };\r\n\r\n    const handleEditLandmarkMode = () => {\r\n        // alert(\"edit not yet implemented\");\r\n        setIsEdit(true);\r\n        setEditId(currentLandmark[0].landmark_uid);\r\n        setEditName(currentLandmark[0].name);\r\n        setEditDescription(currentLandmark[0].description);\r\n        setEditLongitude(currentLandmark[0].coordinates[0]);\r\n        setEditLatitude(currentLandmark[0].coordinates[1]);\r\n        var editLandmark = [{\r\n            coordinates: [currentLandmark[0].coordinates[0], currentLandmark[0].coordinates[1]],\r\n            isVisible: true\r\n        }];\r\n        setEditLandmark(editLandmark);\r\n    };\r\n\r\n    const handleCancelEdit = () => {\r\n        var editLandmark = [{\r\n            coordinates: [0, 0],\r\n            isVisible: false\r\n        }];\r\n        setEditLandmark(editLandmark);\r\n        setIsEdit(false);\r\n    };\r\n\r\n    const handleEditLandmark = () => {\r\n        if(editId !== -1 && editName !== \"\" && editDescription !== \"\" && editLongitude !== \"\" && editLatitude !== \"\"){\r\n            const body = {\r\n                landmark_uid: editId,\r\n                name: editName,\r\n                description: editDescription,\r\n                coordinates: [editLongitude, editLatitude]\r\n            };\r\n\r\n            fetch(`/landmarks`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                  \"Content-Type\": \"application/json\",\r\n                  'authorization' : `Bearer ${localStorage.getItem('token')}`\r\n                },\r\n                body: JSON.stringify(body)\r\n            })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                updateLandmarks({\r\n                    landmark_uid: editId,\r\n                    name: editName,\r\n                    description: editDescription,\r\n                    coordinates: [editLongitude, editLatitude]\r\n                });\r\n                setIsEdit(false);\r\n            })\r\n            .catch(err => invalidateAuth());\r\n        }\r\n        else{\r\n            alert('A field is missing! Cannot update landmark.')\r\n        }\r\n    };\r\n    /**\r\n     * Gets the landmark information.\r\n     */\r\n    const getLandmarkInfo = () => {\r\n        // console.log(\"landmark info updating\", currentLandmark);\r\n        const landmark = currentLandmark[0];\r\n        if (landmark.isVisible) {\r\n            var description = landmark.description;\r\n            var descriptionArray = description.split(\"\\n\");\r\n\r\n            if(isEdit){\r\n                return (\r\n                    <form>\r\n                        <FormControl fullWidth>\r\n                        <InputLabel htmlFor=\"landmarkLatitude\">Latitude</InputLabel>\r\n                        <Input \r\n                            type=\"number\" \r\n                            id=\"landmarkLatitude\" \r\n                            placeholder=\"Enter value between -90 to 90\" \r\n                            name=\"Latitude\"\r\n                            value={editLatitude}\r\n                            onChange={handleLatitudeChange}/>\r\n                        </FormControl>\r\n                        <br/>\r\n                        <FormControl fullWidth>\r\n                        <InputLabel htmlFor=\"landmarkLongitude\">Longitude</InputLabel>\r\n                        <Input \r\n                            type=\"number\" \r\n                            id=\"landmarkLongitude\" \r\n                            placeholder=\"Enter value between -180 to 180\" \r\n                            name=\"Longitude\"\r\n                            value={editLongitude}\r\n                            onChange={handleLongitudeChange}/>\r\n                        </FormControl>\r\n                        <br/>\r\n                        <TextField \r\n                            id=\"standard-basic\" \r\n                            label=\"Landmark Name\" \r\n                            placeholder=\"ie. Vancouver, BC, Canada\" \r\n                            value={editName}\r\n                            onChange={handleNameChange}\r\n                            fullWidth/>\r\n                        <br/>\r\n                        <TextField\r\n                            id=\"standard-multiline-static\"\r\n                            label=\"Description\"\r\n                            placeholder=\"Enter a description about the landmark\" \r\n                            multiline\r\n                            rows={4}\r\n                            value={editDescription}\r\n                            onChange={handleDescriptionChange}\r\n                            fullWidth/>\r\n                        <br/>\r\n                        <br/>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={handleEditLandmark}>\r\n                            Finish Edit\r\n                        </Button>\r\n                        \r\n                        <Button variant=\"contained\" color=\"secondary\" onClick={handleCancelEdit}>\r\n                            Cancel Edit\r\n                        </Button>\r\n                    </form>\r\n                );\r\n            }\r\n            else{\r\n                return (\r\n                    <div>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            endIcon={<EditIcon/>}\r\n                            onClick={handleEditLandmarkMode}>\r\n                            Edit\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"secondary\"\r\n                            endIcon={<DeleteIcon/>}\r\n                            onClick={handleDeleteLandmark}>\r\n                            Delete\r\n                        </Button>\r\n                        <Typography variant=\"h4\">\r\n                            {landmark.name}\r\n                        </Typography>\r\n                        <Typography variant=\"h6\" paragraph>\r\n                            Latitude: {landmark.coordinates[1]}, Longitude: {landmark.coordinates[0]}\r\n                        </Typography>\r\n                        {\r\n                            descriptionArray.map(element => {\r\n                                return (\r\n                                    <Typography variant=\"h6\" paragraph>\r\n                                        {element}\r\n                                    </Typography>\r\n                                );\r\n                            })\r\n                        }\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n        else {\r\n            return (\r\n                <div>\r\n                    <Typography variant=\"h4\">\r\n                        Click on a Landmark\r\n                    </Typography>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    //Use effect hook.\r\n    // useEffect(() => {\r\n    //     drawGlobe(oldCoordinates, scale, true);\r\n    // }, [scale, landmarks])\r\n\r\n    return (\r\n        <div hidden={value !== index}>\r\n            \r\n            <Typography variant=\"h5\">\r\n                Landmark Information\r\n            </Typography>\r\n            <br/>\r\n            {getLandmarkInfo()}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LandmarkInfo;","//Imports from libraries\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport { Input, Typography } from '@material-ui/core';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nfunction LandmarkInfo({setLandmarks, value, index, setTempLandmark, invalidateAuth}) {\r\n\r\n  //NewLandmarkTab states\r\n  const [landmarkName, setLandmarkName] = useState(\"\");\r\n  const [landmarkLatitude, setLandmarkLatitude] = useState(\"\");\r\n  const [landmarkLongitude, setLandmarkLongitude] = useState(\"\");\r\n  const [landmarkDescription, setLandmarkDescription] = useState(\"\");\r\n\r\n  /**\r\n   * Handles the description change\r\n   * @param {*} event - the text event \r\n   */\r\n  const handleDescriptionChange = (event) => {\r\n    setLandmarkDescription(event.target.value);\r\n  };\r\n\r\n  /**\r\n   * Handles the name change.\r\n   * @param {*} event - the text event\r\n   */\r\n  const handleNameChange = (event) => {\r\n    setLandmarkName(event.target.value);\r\n  }\r\n\r\n  /**\r\n   * Handles the latitude change.\r\n   * @param {*} event - the text event\r\n   */\r\n  const handleLatitudeChange = (event) => {\r\n    var latitudeInput = parseFloat(event.target.value);\r\n    \r\n    //TODO: validation check\r\n    if(event.target.value === \"\"){\r\n      var newTempLandmark = [{\r\n        coordinates: [0, 0],\r\n        isVisible: false\r\n      }];\r\n\r\n      setTempLandmark(newTempLandmark);\r\n    }\r\n    if(Math.abs(event.target.value) <= 90){\r\n      setLandmarkLatitude(event.target.value);\r\n      var newTempLandmark = [{\r\n        coordinates: [landmarkLongitude, event.target.value],\r\n        isVisible: true\r\n      }];\r\n      if(landmarkLongitude !== \"\" && event.target.value !== \"\"){\r\n        setTempLandmark(newTempLandmark);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles the longitude change.\r\n   * @param {*} event - the text event\r\n   */\r\n  const handleLongitudeChange = (event) => {\r\n    var longitudeInput = parseFloat(event.target.value);\r\n    //TODO: validation check\r\n    if(event.target.value === \"\"){\r\n      var newTempLandmark = [{\r\n        coordinates: [0, 0],\r\n        isVisible: false\r\n      }];\r\n\r\n      setTempLandmark(newTempLandmark);\r\n    }\r\n    if(Math.abs(event.target.value) <= 180){\r\n      setLandmarkLongitude(event.target.value);\r\n\r\n      var newTempLandmark = [{\r\n        coordinates: [event.target.value, landmarkLatitude],\r\n        isVisible: true\r\n      }];\r\n\r\n      if(event.target.value !== \"\" && landmarkLatitude !== \"\"){\r\n        setTempLandmark(newTempLandmark);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles the add landmark event.\r\n   */\r\n  const handleAddLandmark = () => {\r\n    if(!(landmarkName === \"\" || landmarkDescription === \"\" || landmarkLatitude === \"\" || landmarkLongitude === \"\")){\r\n      const body = {\r\n        landmarkName: landmarkName,\r\n        landmarkDescription: landmarkDescription,\r\n        latitude: parseFloat(landmarkLatitude),\r\n        longitude: parseFloat(landmarkLongitude)\r\n      }\r\n  \r\n      fetch(`/landmarks`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization' : `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify(body)\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        setLandmarks(prevArray => [...prevArray, {\r\n          id: `landmark_${res.landmark_uid}`,\r\n          path_uid: res.landmark_uid,\r\n          name: landmarkName,\r\n          description: landmarkDescription,\r\n          coordinates: [parseFloat(landmarkLongitude), parseFloat(landmarkLatitude)]\r\n        }])\r\n  \r\n        setLandmarkName(\"\");\r\n        setLandmarkLatitude(\"\");\r\n        setLandmarkLongitude(\"\");\r\n        setLandmarkDescription(\"\");\r\n        setTempLandmark([{\r\n          coordinates: [0, 0],\r\n          isVisible: false\r\n        }]);\r\n      })\r\n      .catch(err => invalidateAuth());\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form hidden={value !== index}>\r\n      <Typography variant=\"h5\">\r\n        Create a New Landmark\r\n      </Typography>\r\n      <FormControl fullWidth>\r\n      <InputLabel htmlFor=\"landmarkLatitude\">Latitude</InputLabel>\r\n      <Input \r\n        type=\"number\" \r\n        id=\"landmarkLatitude\" \r\n        placeholder=\"Enter value between -90 to 90\" \r\n        name=\"Latitude\"\r\n        value={landmarkLatitude}\r\n        onChange={handleLatitudeChange} />\r\n      </FormControl>\r\n      <br/>\r\n      <FormControl fullWidth>\r\n      <InputLabel htmlFor=\"landmarkLongitude\">Longitude</InputLabel>\r\n      <Input \r\n        type=\"number\" \r\n        id=\"landmarkLongitude\" \r\n        placeholder=\"Enter value between -180 to 180\" \r\n        name=\"Longitude\"\r\n        value={landmarkLongitude}\r\n        onChange={handleLongitudeChange} />\r\n      </FormControl>\r\n      <br/>\r\n      <TextField \r\n        id=\"standard-basic\" \r\n        label=\"Landmark Name\" \r\n        placeholder=\"ie. Vancouver, BC, Canada\" \r\n        value={landmarkName}\r\n        onChange={handleNameChange} \r\n        fullWidth/>\r\n      <br/>\r\n      <TextField\r\n        id=\"standard-multiline-static\"\r\n        label=\"Description\"\r\n        placeholder=\"Enter a description about the landmark\" \r\n        multiline\r\n        rows={4}\r\n        value={landmarkDescription}\r\n        onChange={handleDescriptionChange} \r\n        fullWidth/>\r\n      <br/>\r\n      <br/>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={handleAddLandmark}>\r\n        Add Landmark\r\n      </Button>\r\n    </form>\r\n  );\r\n}\r\n \r\nexport default LandmarkInfo;","//Imports from libraries\r\nimport React, { useState } from \"react\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Input } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport AirplanemodeActiveIcon from '@material-ui/icons/AirplanemodeActive';\r\nimport CommuteIcon from '@material-ui/icons/Commute';\r\nfunction NewPathTab({setPaths, value, index, setTempPath, invalidateAuth}) {\r\n\r\n  //NewPathTab states\r\n  const [nodes, setNodes] = useState([]);\r\n  const [isAirplane, setIsAirplane] = useState(true);\r\n\r\n  /**\r\n   * Handles creating a new node.\r\n   */\r\n  const handleNewNode = () => {\r\n    setNodes(prevArray => [...prevArray, [\"\", \"\"]]);\r\n  }\r\n\r\n  /**\r\n   * Handles creating a new path.\r\n   */\r\n  const handleNewPath = () => {\r\n    var isNodesPopulated = true;\r\n\r\n    for(var i = 0; i < nodes.length; i++){\r\n      if(nodes[i][0] === \"\" || nodes[i][1] === \"\"){\r\n        isNodesPopulated = false;\r\n      }\r\n    }\r\n    \r\n    if(isNodesPopulated){\r\n      console.log(\"going here\");\r\n      const body = {\r\n        coordinates: [...nodes], \r\n        isAirPlane: isAirplane\r\n      }\r\n  \r\n      fetch(`/paths`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization' : `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify(body)\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        let newPath = {\r\n          type: \"LineString\", \r\n          coordinates: [...nodes], \r\n          id:`path_${res.path_uid}`,\r\n          path_uid: res.path_uid,\r\n          isAirPlane: isAirplane\r\n        };\r\n  \r\n        setPaths(prevArray => [...prevArray, newPath]);\r\n        setNodes([]);\r\n        setTempPath([{\r\n          type: \"LineString\",\r\n          coordinates: [],\r\n          isAirPlane: isAirplane\r\n        }]);\r\n      })\r\n      .catch(err => invalidateAuth());\r\n  \r\n      \r\n    }\r\n\r\n  };\r\n\r\n  /**\r\n   * Handles deleting a node.\r\n   * @param {*} event - the button event\r\n   */\r\n  const handleDeleteNode = (event) => {\r\n    var idArray = event.target.parentElement.id.split(\"_\");\r\n    var index = parseInt(idArray[1]);\r\n\r\n    var newNodes = [...nodes];\r\n    newNodes.splice(index, 1);\r\n\r\n    setNodes(newNodes);\r\n    updateTempPath(newNodes);\r\n  };\r\n\r\n  /**\r\n   * Updates the temporary path.\r\n   * @param {*} newElements - the nodes used to show the temporary path\r\n   * @param {*} newIsAirplane - (optional) the boolean airplane state\r\n   */\r\n  const updateTempPath = (newElements, newIsAirplane) => {\r\n    var isAirplaneVal = newIsAirplane !== undefined ? newIsAirplane : isAirplane;\r\n\r\n    var newTempPath = {\r\n      type: \"LineString\", \r\n      coordinates: [],\r\n      isAirPlane: isAirplaneVal\r\n    };\r\n\r\n    for(var i = 0; i < newElements.length; i++){\r\n      var node = newElements[i];\r\n      var lat = node[1];\r\n      var long = node[0];\r\n\r\n      if(lat !== \"\" && long !== \"\"){\r\n        newTempPath.coordinates.push(node);\r\n      }\r\n    }\r\n    setTempPath([newTempPath]);\r\n  };\r\n\r\n  /**\r\n   * Handles a latitude field being changed.\r\n   * @param {*} event - the text event \r\n   */\r\n  const onElementLatitudeChange = (event) => {\r\n    var idArray = event.target.id.split(\"_\");\r\n    var index = parseInt(idArray[1]);\r\n\r\n    var newElements = [...nodes];\r\n    let item = {...newElements[index]};\r\n\r\n    if(Math.abs(parseFloat(event.target.value)) <= 90){\r\n      item[1] = parseFloat(event.target.value);\r\n    }\r\n    else if(event.target.value === \"\"){\r\n      item[1] = event.target.value;\r\n    }\r\n\r\n    newElements[index] = item;\r\n\r\n    setNodes(newElements);\r\n    updateTempPath(newElements);\r\n  };\r\n\r\n  /**\r\n   * Handles a longitude field being changed.\r\n   * @param {*} event - the text event\r\n   */\r\n  const onElementLongitudeChange = (event) => {\r\n    var idArray = event.target.id.split(\"_\");\r\n    var index = parseInt(idArray[1]);\r\n\r\n    var newElements = [...nodes];\r\n    let item = {...newElements[index]};\r\n\r\n    if(Math.abs(parseFloat(event.target.value)) <= 180){\r\n      item[0] = parseFloat(event.target.value);\r\n    }\r\n    else if(event.target.value === \"\"){\r\n      item[0] = event.target.value;\r\n    }\r\n\r\n    newElements[index] = item;\r\n    \r\n    setNodes(newElements);\r\n    updateTempPath(newElements);\r\n  };\r\n\r\n  /**\r\n   * Gets the view for the finish button.\r\n   */\r\n  const getFinishButton = () => {\r\n    if(nodes.length >= 2){\r\n      return(\r\n        <Button variant=\"contained\" color=\"secondary\" onClick={handleNewPath} fullWidth>\r\n          Finish Path\r\n        </Button>\r\n      );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles the switch state being changed.\r\n   * @param {*} event - the switch event\r\n   */\r\n  const handleSwitchChange = (event) => {\r\n    setIsAirplane(event.target.checked);\r\n    updateTempPath(nodes, event.target.checked);\r\n  };\r\n\r\n  return (\r\n    <form hidden={value !== index}>\r\n      <Typography variant=\"h5\">\r\n        Create a New Path\r\n      </Typography>\r\n      <FormControlLabel\r\n        control={\r\n          <Switch \r\n            checked={isAirplane} \r\n            onChange={handleSwitchChange} \r\n            name=\"checkedA\" \r\n            checkedIcon={<AirplanemodeActiveIcon/>}\r\n            icon={<CommuteIcon/>}\r\n          />\r\n        }\r\n        label=\"Travel Type\"/>\r\n      {\r\n        nodes.map((element, index) => {\r\n          var latId = `nodeLatitude_${index}`;\r\n          var longitudeId = `nodeLongitude_${index}`;\r\n          var deleteBtnId = `deleteBtn_${index}`;\r\n\r\n          return (\r\n            <form>\r\n              <br/>\r\n              <Typography>Node {index + 1}</Typography>\r\n              <FormControl fullWidth>\r\n                <InputLabel htmlFor={latId}>Latitude</InputLabel>\r\n                <Input \r\n                  type=\"number\" \r\n                  id={latId}\r\n                  placeholder=\"Enter value between -90 to 90\" \r\n                  name=\"Latitude\"\r\n                  value={element[1]}\r\n                  onChange={onElementLatitudeChange} />\r\n              </FormControl>\r\n              <FormControl fullWidth>\r\n              <InputLabel htmlFor={longitudeId}>Longitude</InputLabel>\r\n              <Input \r\n                type=\"number\" \r\n                id={longitudeId}\r\n                placeholder=\"Enter value between -180 to 180\" \r\n                name=\"Longitude\"\r\n                value={element[0]}\r\n                onChange={onElementLongitudeChange} />\r\n              </FormControl>\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleDeleteNode} fullWidth id={deleteBtnId}>\r\n                Delete Node {index + 1}\r\n              </Button>\r\n            </form>\r\n          );\r\n        })\r\n      }\r\n      <br/>\r\n      <Button variant=\"contained\" color=\"primary\" onClick={handleNewNode} fullWidth> \r\n        Add Node\r\n      </Button>\r\n      \r\n      {getFinishButton()}\r\n\r\n      <br/>\r\n    </form>\r\n  );\r\n}\r\n \r\nexport default NewPathTab;","//Imports from libraries\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\nfunction ZoomSlider({ scale, handleChangeScale }) {\r\n  const marks = [\r\n    {\r\n      value: 1,\r\n      label: 'Full View',\r\n    },\r\n    {\r\n      value: 2,\r\n      label: 'Half View',\r\n    },\r\n    {\r\n      value: 4.24733333333,\r\n      label: '3000 km',\r\n    },\r\n    {\r\n      value: 8.49466666667,\r\n      label: '1500 km',\r\n    },\r\n    {\r\n      value: 12.742,\r\n      label: '1000 km',\r\n    },\r\n    {\r\n      value: 16.9893333333,\r\n      label: '750 km',\r\n    },\r\n    {\r\n      value: 21.2366666667,\r\n      label: '600 km',\r\n    },\r\n    {\r\n      value: 25.484,\r\n      label: '500 km',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div style={{height:\"100%\"}}>\r\n      <Typography id=\"vertical-slider\" gutterBottom>\r\n        <SearchIcon/>\r\n      </Typography>\r\n      <Slider\r\n        orientation=\"vertical\" value={scale} onChange={handleChangeScale}\r\n        aria-labelledby=\"vertical-slider\" step={0.01}\r\n        min={1}\r\n        max={25.484}\r\n        marks={marks}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ZoomSlider;","import './App.css';\r\nimport Globe from './Globe';\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport { Button, Grid, Toolbar, Typography } from '@material-ui/core';\r\nimport LandmarkInfo from './LandmarkInfo';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport NewLandmarkTab from './NewLandmarkTab';\r\nimport NewPathTab from './NewPathTab';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport TimelineIcon from '@material-ui/icons/Timeline';\r\nimport ZoomSlider from './ZoomSlider';\r\nimport {  Redirect } from \"react-router-dom\";\r\n\r\nfunction Dashboard() {\r\n  // const classes = useStyles();\r\n  const [isAuth, setIsAuth] = React.useState(true);\r\n  const [scale, setScale] = React.useState(1);\r\n  const [paths, setPaths] = React.useState([]);\r\n  const [landmarks, setLandmarks] = React.useState([]);\r\n  const [currentLandmark, setCurrentLandmark] = React.useState([{\r\n    landmark_uid: -1,\r\n    name: \"\",\r\n    description: \"\",\r\n    coordinates: [0, 0],\r\n    isVisible: false\r\n  }]);\r\n\r\n  // const clientHeight = document.getElementById('globeGrid').clientHeight;\r\n\r\n  const handleChangeScale = (event, newValue) => {\r\n    setScale(newValue);\r\n  };\r\n\r\n  \r\n  // const getWindowDimension = () => {\r\n  //   var width = document.getElementById('globeGrid').offsetWidth;\r\n  //   var height = document.getElementById('globeGrid').offsetHeight;\r\n  //   console.log(width < height ? width : height);\r\n  //   return width < height ? width : height;\r\n  // };\r\n\r\n  const getMinDimension = () => {\r\n    // console.log(\"dimension calculated\");\r\n    return window.innerHeight < window.innerWidth ? window.innerHeight : window.innerWidth;\r\n  };\r\n\r\n  const [tabValue, setTabValue] = useState(0);\r\n  const handleTabChange = (event, newValue) => {\r\n    setTabValue(newValue);\r\n  };\r\n\r\n  const [tempPath, setTempPath] = useState([{\r\n    type: \"LineString\", \r\n    coordinates: [],\r\n    isAirPlane: true\r\n  }]);\r\n\r\n  const [tempLandmark, setTempLandmark] = useState([{\r\n    coordinates: [0, 0],\r\n    isVisible: false\r\n  }]);\r\n\r\n  const [editLandmark, setEditLandmark] = useState([{\r\n    coordinates: [0, 0],\r\n    isVisible: false\r\n  }]);\r\n\r\n  const getUserPaths = () => {\r\n    fetch(`/paths`, {\r\n      headers: {\r\n        'authorization' : `Bearer ${localStorage.getItem('token')}` \r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then(res => setPaths(res))\r\n    .catch((error) => {\r\n      invalidateAuth();\r\n    });\r\n  };\r\n\r\n  const getUserLandmarks = () => {\r\n    fetch(`/landmarks`, {\r\n      headers: {\r\n        'authorization' : `Bearer ${localStorage.getItem('token')}` \r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then(res => setLandmarks(res))\r\n    .catch((error) => {\r\n      invalidateAuth();\r\n    });\r\n  };\r\n\r\n  const invalidateAuth = () => {\r\n    localStorage.removeItem('token');\r\n    setIsAuth(false);\r\n  };\r\n  const [subSolarLat, setSubSolarLat] = useState(\"\");\r\n  const [subSolarLong, setSubSolarLong] = useState(\"\");\r\n\r\n  const getSubsolarPoint = () => {\r\n    fetch(`/sun`)\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      console.log(res);\r\n      setSubSolarLong(res.longitude);\r\n      setSubSolarLat(res.latitude);\r\n    });\r\n  };\r\n\r\n  const updateLandmarks = (landmark) => {\r\n    let items = [...landmarks];\r\n    for(var i = 0; i < items.length; i++){\r\n      if(items[i].landmark_uid === landmark.landmark_uid){\r\n        let itemToUpdate = {...items[i]};\r\n        itemToUpdate.name = landmark.name;\r\n        itemToUpdate.description = landmark.description;\r\n        itemToUpdate.coordinates = landmark.coordinates;\r\n        items[i] = itemToUpdate;\r\n        setLandmarks(items);\r\n        setCurrentLandmark([{\r\n          landmark_uid: landmark.landmark_uid,\r\n          name: landmark.name,\r\n          description: landmark.description,\r\n          coordinates: landmark.coordinates,\r\n          isVisible: true\r\n        }]);\r\n        setEditLandmark([{\r\n          coordinates: [0, 0],\r\n          isVisible: false\r\n        }]);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUserLandmarks();\r\n    getUserPaths();\r\n    getSubsolarPoint();\r\n    const interval = setInterval(() => {\r\n      getSubsolarPoint();\r\n    }, 2 * 60000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const getDashboardContent = () => {\r\n    if(isAuth){\r\n      return (\r\n        <Grid container spacing={0}>\r\n          <Grid item xs={1} style={{ padding: 60, height:\"90vh\" }}>\r\n            <ZoomSlider scale={scale} handleChangeScale={handleChangeScale}/>\r\n          </Grid>\r\n          <Grid item xs={7} style={{ padding: 60, height:\"90vh\" }}>\r\n            <Globe scale={scale * getMinDimension()*0.8/2} \r\n              paths={paths} \r\n              landmarks={landmarks} \r\n              landmarkHandler={setCurrentLandmark} \r\n              size={getMinDimension()*0.8} \r\n              tempPath={tempPath}\r\n              tempLandmark={tempLandmark}\r\n              currentLandmark={currentLandmark}\r\n              editLandmark={editLandmark}\r\n              subSolarLat={subSolarLat}\r\n              subSolarLong={subSolarLong}/>\r\n          </Grid>\r\n          <Grid item xs={4} style={{ padding: 60, height:\"90vh\" }} align=\"left\">\r\n            <AppBar position=\"static\">\r\n              <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"simple tabs example\" variant=\"fullWidth\">\r\n                <Tab style={{ minWidth: 25 }} icon={<InfoIcon/>}/>\r\n                <Tab style={{ minWidth: 25 }} icon={<RoomIcon/>}/>\r\n                <Tab style={{ minWidth: 25 }} icon={<TimelineIcon/>}/>\r\n              </Tabs>\r\n            </AppBar>\r\n            <LandmarkInfo currentLandmark={currentLandmark} value={tabValue} index={0} setEditLandmark={setEditLandmark} updateLandmarks={updateLandmarks} invalidateAuth={invalidateAuth}/>\r\n            <NewLandmarkTab setLandmarks={setLandmarks} value={tabValue} index={1} setTempLandmark={setTempLandmark} invalidateAuth={invalidateAuth}/>\r\n            <NewPathTab setPaths={setPaths} value={tabValue} index={2} setTempPath={setTempPath} invalidateAuth={invalidateAuth}/>\r\n          </Grid>\r\n          {/* <Grid item xs={12} style={{ padding: 60}}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={invalidateAuth}>\r\n              Logout\r\n            </Button>\r\n          </Grid> */}\r\n        </Grid>\r\n      );\r\n    }\r\n    else{\r\n      return (<Redirect to={{pathname:'/loggedOut'}}/>);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\">\r\n            Wanderlust\r\n          </Typography>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={invalidateAuth}>\r\n            Logout\r\n          </Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {getDashboardContent()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n","//Imports from libraries\r\nimport { Button, TextField, Typography } from \"@material-ui/core\";\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport {  Redirect, Link } from \"react-router-dom\";\r\n\r\nfunction SignIn() {\r\n\r\n  const [isTokenValid, setIsTokenValid] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const handleSignIn = () => {\r\n    setUsername(\"\");\r\n    setPassword(\"\");\r\n\r\n    const body = {\r\n      \"username\": username,\r\n      \"password\": password\r\n    }\r\n\r\n    // console.log(\"body used for signing in\", body);\r\n\r\n    fetch(`/users/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify(body)\r\n    })\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      // console.log(\"result of signing in\", res);\r\n      localStorage.setItem('token', res.token);\r\n      setIsTokenValid(true);\r\n    })\r\n    .catch((error) => alert(\"Invalid credentials!\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(localStorage.getItem('token') !== null){\r\n      fetch(`/users/checkToken`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          'authorization' : `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        if(res.isTokenValid){\r\n          setIsTokenValid(true);\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const getSignInContent = () => {\r\n    if(isTokenValid){\r\n      return (<Redirect to={{pathname:'/dashboard'}}/>);\r\n    }\r\n    else{\r\n      return (\r\n        <div>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <form>\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"username\"\r\n              label=\"Username\"\r\n              name=\"username\"\r\n              autoComplete=\"username\"\r\n              autoFocus\r\n              value={username}\r\n              onChange={handleUsernameChange}\r\n            />\r\n            <TextField\r\n              variant=\"outlined\"\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n              value={password}\r\n              onChange={handlePasswordChange}\r\n            />\r\n            <Button\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleSignIn}\r\n            >\r\n              Sign In\r\n            </Button>\r\n          </form>\r\n          <Link to=\"/signUp\">Don't have an account? Sign up</Link>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {getSignInContent()}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignIn;","//Imports from libraries\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport {\r\n  Link\r\n} from \"react-router-dom\";\r\n\r\nfunction LoggedOut() {\r\n\r\n    return (\r\n        <div>\r\n            <br/>\r\n            Session has expired. Please sign back in.\r\n            <br/>\r\n            <Link to=\"/\">Back to Sign In</Link>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default LoggedOut;","//Imports from libraries\r\nimport { Button, TextField, Typography } from \"@material-ui/core\";\r\nimport React, { Component, useState, useRef, useEffect } from \"react\";\r\nimport {  Redirect, Link } from \"react-router-dom\";\r\n\r\nfunction SignUp() {\r\n\r\n  // const [isTokenValid, setIsTokenValid] = useState(false);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [isUsernameTaken, setIsUsernameTaken] = useState(false);\r\n\r\n  const hasNumber = value => {\r\n    return new RegExp(/[0-9]/).test(value);\r\n  }\r\n  const hasMixed = value => {\r\n    return new RegExp(/[a-z]/).test(value) && new RegExp(/[A-Z]/).test(value);\r\n  }\r\n  const hasSpecial = value => {\r\n    return new RegExp(/[!#@$%^&*)(+=._-]/).test(value);\r\n  }\r\n\r\n  const strengthMagnitude = count => {\r\n    if (count < 2)\r\n       return 'Very Weak';\r\n    if (count < 3)\r\n       return 'Weak';\r\n    if (count < 4)\r\n       return 'Fair';\r\n    if (count < 5)\r\n       return 'Good';\r\n    if (count < 6)\r\n       return 'Strong';\r\n  }\r\n\r\n  const strengthIndicator = value => {\r\n    let strengths = 0;\r\n    if (value.length > 5)\r\n       strengths++;\r\n    if (value.length > 7)\r\n       strengths++;\r\n    if (hasNumber(value))\r\n       strengths++;\r\n    if (hasSpecial(value))\r\n       strengths++;\r\n    if (hasMixed(value))\r\n       strengths++;\r\n    return strengthMagnitude(strengths);\r\n  }\r\n\r\n  const handleUsernameChange = (event) => {\r\n    setUsername(event.target.value);\r\n    getUsernameStatus(event.target.value);\r\n  };\r\n\r\n  const handlePasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const handleEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const getUsernameStatus = (value) => {\r\n    fetch(`/users/exists?username=${value}`)\r\n    .then(res => res.json())\r\n    .then(res => {\r\n      setIsUsernameTaken(res.isexist === \"true\" ? true : false);\r\n    })\r\n  }\r\n\r\n  const handleSignUp = () => {\r\n    if(email === \"\" || password === \"\" || username === \"\"){\r\n      alert(\"At least one field is empty!\");\r\n    }\r\n    else{\r\n      const body = {\r\n        \"email\": email,\r\n        \"password\" : password,\r\n        \"username\" : username\r\n      }\r\n  \r\n      // console.log(\"body used for signing in\", body);\r\n      // const temp = {\r\n      //   method: \"POST\",\r\n      //   headers: {\r\n      //     \"Content-Type\": \"application/json\"\r\n      //   },\r\n      //   body: JSON.stringify(body)\r\n      // };\r\n      // console.log(\"parameters used with the api\", temp);\r\n  \r\n      fetch(`/users/create`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(body)\r\n      })\r\n      .then(res => res.json())\r\n      .then(res => {\r\n        setUsername(\"\");\r\n        setPassword(\"\");\r\n        setEmail(\"\");\r\n        alert(\"A new user has been made!\");\r\n      })\r\n      .catch((error) => {\r\n        // console.log(error);\r\n        alert(\"The username already exists! Please create an unowned username.\");\r\n      });\r\n    }\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   if(localStorage.getItem('token') !== null){\r\n  //     fetch(`/users/checkToken`, {\r\n  //       method: \"POST\",\r\n  //       headers: {\r\n  //         \"Content-Type\": \"application/json\",\r\n  //         'authorization' : `Bearer ${localStorage.getItem('token')}`\r\n  //       },\r\n  //     })\r\n  //     .then(res => res.json())\r\n  //     .then(res => {\r\n  //       if(res.isTokenValid){\r\n  //         setIsTokenValid(true);\r\n  //       }\r\n  //     });\r\n  //   }\r\n  // }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Typography component=\"h1\" variant=\"h5\">\r\n        Sign Up\r\n      </Typography>\r\n      <form>\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          id=\"email\"\r\n          label=\"Email\"\r\n          autoComplete=\"email\"\r\n          autoFocus\r\n          value={email}\r\n          onChange={handleEmailChange}\r\n        />\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          id=\"username\"\r\n          label=\"Username\"\r\n          autoComplete=\"username\"\r\n          value={username}\r\n          onChange={handleUsernameChange}\r\n        />\r\n        Username Status: {isUsernameTaken ? \"Taken\" : \"Available\"}\r\n        <TextField\r\n          variant=\"outlined\"\r\n          margin=\"normal\"\r\n          required\r\n          fullWidth\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          id=\"password\"\r\n          autoComplete=\"current-password\"\r\n          value={password}\r\n          onChange={handlePasswordChange}\r\n        />\r\n        Password Strength: {strengthIndicator(password)}\r\n        <Button\r\n          // type=\"submit\"\r\n          fullWidth\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={handleSignUp}\r\n        >\r\n          Sign Up\r\n        </Button>\r\n      </form>\r\n      <Link to=\"/\">Back to sign in screen</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignUp;","import './App.css';\nimport React, { Component, useState, useRef, useEffect } from \"react\";\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Dashboard from './Dashboard';\nimport SignIn from './SignIn';\nimport LoggedOut from './LoggedOut';\nimport SignUp from './SignUp';\n\nconst theme = createMuiTheme({\n  palette: {\n    type: \"dark\",\n  }\n});\n\nfunction App() {\n  \n  useEffect(() => {\n    document.title = 'Wanderlust';\n  }, []);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline/>\n      <BrowserRouter>\n        <Switch>\n          <Route exact path='/' component={SignIn}/>\n          <Route exact path='/dashboard' component={Dashboard}/>\n          <Route exact path='/loggedOut' component={LoggedOut}/>\n          <Route exact path='/signUp' component={SignUp}/>\n        </Switch>\n      </BrowserRouter>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}